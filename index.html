<!DOCTYPE html>
<html lang="pt-br" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Acordes Pro</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>

<body>

    <header class="app-header">
        <div class="instrument-toggle">
            <button id="btnGuitar" class="inst-btn active" onclick="setInstrument('guitar')">
                <span class="material-symbols-rounded">grid_view</span>
            </button>
            <button id="btnPiano" class="inst-btn" onclick="setInstrument('piano')">
                <span class="material-symbols-rounded">piano</span>
            </button>
        </div>

        <div class="selection-bar">
            <div class="select-item" onclick="openModal('modalKey')">
                <span class="label">Tom</span>
                <span class="value" id="labelKey">C</span>
            </div>
            <div class="divider"></div>
            <div class="select-item highlight" onclick="openModal('modalRoot')">
                <span class="label">Nota</span>
                <span class="value" id="labelRoot">C</span>
            </div>
            <div class="divider"></div>
            <div class="select-item" onclick="openModal('modalType')">
                <span class="label">Tipo</span>
                <span class="value" id="labelType">Maior</span>
            </div>
            <button class="theme-btn" onclick="toggleTheme()">
                <span class="material-symbols-rounded">dark_mode</span>
            </button>
        </div>
    </header>

    <main class="content-area">

        <div class="chord-display">
            <h1 id="displaySymbol">C</h1>
            <h2 id="displayName">Dó Maior</h2>
        </div>

        <div class="controls-bar">
            <div class="badge" id="displayVariation">Variação 1</div>
            <label class="switch-container" id="barreToggleContainer">
                <input type="checkbox" id="barreToggle" onchange="toggleBarreFilter()" checked>
                <span class="slider"></span>
                <span class="switch-text">Pestanas</span>
            </label>
        </div>

        <div class="stage-container">
            <button class="nav-btn prev" onclick="changeVariation(-1)">
                <span class="material-symbols-rounded">chevron_left</span>
            </button>

            <div class="diagram-viewport">
                <div id="guitarDiagram" class="diagram-component">
                    <div class="fretboard">
                        <div class="fret-offset" id="fretOffset">1ª</div>
                        <div class="nut" id="guitarNut"></div>
                        <div class="strings-grid">
                            <div class="string"></div>
                            <div class="string"></div>
                            <div class="string"></div>
                            <div class="string"></div>
                            <div class="string"></div>
                            <div class="string"></div>
                        </div>
                        <div class="frets-grid">
                            <div class="fret"></div>
                            <div class="fret"></div>
                            <div class="fret"></div>
                            <div class="fret"></div>
                        </div>
                        <div class="markers-grid" id="guitarMarkers"></div>
                        <div class="string-labels">
                            <span>6</span><span>5</span><span>4</span><span>3</span><span>2</span><span>1</span>
                        </div>
                    </div>
                </div>

                <div id="pianoDiagram" class="diagram-component" style="display: none;">
                    <div class="piano-wrapper">
                        <div class="piano-keys" id="pianoKeys"></div>
                    </div>
                </div>
            </div>

            <button class="nav-btn next" onclick="changeVariation(1)">
                <span class="material-symbols-rounded">chevron_right</span>
            </button>
        </div>

        <div class="harmonic-field">
            <div class="hf-header">
                <span class="material-symbols-rounded">music_note</span>
                <span>Campo Harmônico de <b id="harmonicKeyName">C</b></span>
            </div>
            <div class="hf-scroll">
                <div class="hf-list" id="harmonicGrid"></div>
            </div>
        </div>
    </main>

    <div id="modalKey" class="modal-backdrop" onclick="closeModal('modalKey')">
        <div class="modal-card" onclick="event.stopPropagation()">
            <div class="modal-top">
                <h3>Escolha o Tom</h3><button onclick="closeModal('modalKey')">✕</button></div>
            <div class="grid-buttons" id="keyGrid"></div>
        </div>
    </div>

    <div id="modalRoot" class="modal-backdrop" onclick="closeModal('modalRoot')">
        <div class="modal-card" onclick="event.stopPropagation()">
            <div class="modal-top">
                <h3>Escolha a Nota</h3><button onclick="closeModal('modalRoot')">✕</button></div>
            <div class="grid-buttons" id="rootGrid"></div>
        </div>
    </div>

    <div id="modalType" class="modal-backdrop" onclick="closeModal('modalType')">
        <div class="modal-card" onclick="event.stopPropagation()">
            <div class="modal-top">
                <h3>Tipo de Acorde</h3><button onclick="closeModal('modalType')">✕</button></div>
            <div class="list-buttons" id="typeGrid"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>